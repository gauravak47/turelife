<!DOCTYPE html>
<html lang="en" data-color-scheme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TrueLife — Secure Checkout</title>
  
  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  
  <!-- Security Meta -->
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
</head>
<body>
  <!-- 💖 EPIC HEARTBEAT LOADER -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <div class="logo-loader">
        <i class="fas fa-heartbeat heartbeat-pulse"></i>
        TrueLife
      </div>
      
      <div class="loading-bar">
        <div class="loading-progress"></div>
      </div>
      
      <div class="loading-text">Securing your checkout...</div>
    </div>
  </div>

  <!-- 🍞 TOAST CONTAINER -->
  <div id="toast-container" class="toast-container"></div>

  <!-- 🔒 SECURITY HEADER -->
  <header class="checkout-header">
    <div class="container header-content">
      <div class="logo">
        <i class="fas fa-heartbeat"></i> 
        TrueLife
      </div>
      
      <div class="security-indicators">
        <div class="security-badge">
          <i class="fas fa-shield-alt"></i>
          SSL Secured
        </div>
        <div class="security-badge">
          <i class="fas fa-lock"></i>
          256-bit Encryption
        </div>
      </div>
      
      <button class="back-to-cart" onclick="window.location.href='cart.html'">
        <i class="fas fa-arrow-left"></i>
        Back to Cart
      </button>
    </div>
  </header>

  <!-- 📋 CHECKOUT PROGRESS -->
  <div class="checkout-progress">
    <div class="container">
      <div class="progress-steps">
        <div class="step active" data-step="1">
          <div class="step-icon">
            <i class="fas fa-user"></i>
          </div>
          <span>Contact Info</span>
        </div>
        
        <div class="step" data-step="2">
          <div class="step-icon">
            <i class="fas fa-shipping-fast"></i>
          </div>
          <span>Shipping</span>
        </div>
        
        <div class="step" data-step="3">
          <div class="step-icon">
            <i class="fas fa-credit-card"></i>
          </div>
          <span>Payment</span>
        </div>
        
        <div class="step" data-step="4">
          <div class="step-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <span>Review</span>
        </div>
      </div>
    </div>
  </div>

  <!-- 🛒 MAIN CHECKOUT -->
  <main class="checkout-main">
    <div class="container">
      <div class="checkout-layout">
        
        <!-- LEFT SIDE - FORMS -->
        <div class="checkout-forms">
          
          <!-- STEP 1: CONTACT INFO -->
          <section class="checkout-step" id="step-1">
            <div class="step-header">
              <h2>
                <i class="fas fa-user-circle"></i>
                Contact Information
              </h2>
              <p>We'll use this to send order updates</p>
            </div>
            
            <form id="contact-form" class="checkout-form">
              <div class="form-group">
                <label for="email" class="required">Email Address</label>
                <input type="email" id="email" name="email" required autocomplete="email">
                <div class="field-hint">For order confirmations and updates</div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="firstName" class="required">First Name</label>
                  <input type="text" id="firstName" name="firstName" required autocomplete="given-name">
                </div>
                <div class="form-group">
                  <label for="lastName" class="required">Last Name</label>
                  <input type="text" id="lastName" name="lastName" required autocomplete="family-name">
                </div>
              </div>
              
              <div class="form-group">
                <label for="phone" class="required">Phone Number</label>
                <input type="tel" id="phone" name="phone" required autocomplete="tel" placeholder="+91 98765 43210">
                <div class="field-hint">For delivery coordination</div>
              </div>
              
              <div class="marketing-opt-in">
                <label class="checkbox-label">
                  <input type="checkbox" id="marketing" name="marketing">
                  <span class="checkmark"></span>
                  Send me exclusive offers and updates
                </label>
              </div>
            </form>
            
            <div class="step-actions">
              <button type="button" class="btn btn--primary btn--full-width epic-btn" onclick="app.nextCheckoutStep()">
                Continue to Shipping
                <i class="fas fa-arrow-right"></i>
              </button>
            </div>
          </section>

          <!-- STEP 2: SHIPPING ADDRESS -->
          <section class="checkout-step" id="step-2" style="display: none;">
            <div class="step-header">
              <h2>
                <i class="fas fa-map-marker-alt"></i>
                Shipping Address
              </h2>
              <p>Where should we deliver your order?</p>
            </div>
            
            <form id="shipping-form" class="checkout-form">
              <div class="form-group">
                <label for="address" class="required">Street Address</label>
                <input type="text" id="address" name="address" required autocomplete="street-address">
              </div>
              
              <div class="form-group">
                <label for="address2">Apartment, suite, etc. (optional)</label>
                <input type="text" id="address2" name="address2" autocomplete="address-line2">
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="city" class="required">City</label>
                  <input type="text" id="city" name="city" required autocomplete="address-level2">
                </div>
                <div class="form-group">
                  <label for="state" class="required">State</label>
                  <select id="state" name="state" required autocomplete="address-level1">
                    <option value="">Select State</option>
                    <option value="andhra-pradesh">Andhra Pradesh</option>
                    <option value="assam">Assam</option>
                    <option value="bihar">Bihar</option>
                    <option value="chhattisgarh">Chhattisgarh</option>
                    <option value="goa">Goa</option>
                    <option value="gujarat">Gujarat</option>
                    <option value="haryana">Haryana</option>
                    <option value="himachal-pradesh">Himachal Pradesh</option>
                    <option value="jharkhand">Jharkhand</option>
                    <option value="karnataka">Karnataka</option>
                    <option value="kerala">Kerala</option>
                    <option value="madhya-pradesh">Madhya Pradesh</option>
                    <option value="maharashtra">Maharashtra</option>
                    <option value="manipur">Manipur</option>
                    <option value="meghalaya">Meghalaya</option>
                    <option value="mizoram">Mizoram</option>
                    <option value="nagaland">Nagaland</option>
                    <option value="odisha">Odisha</option>
                    <option value="punjab">Punjab</option>
                    <option value="rajasthan">Rajasthan</option>
                    <option value="sikkim">Sikkim</option>
                    <option value="tamil-nadu">Tamil Nadu</option>
                    <option value="telangana">Telangana</option>
                    <option value="tripura">Tripura</option>
                    <option value="uttarakhand">Uttarakhand</option>
                    <option value="uttar-pradesh">Uttar Pradesh</option>
                    <option value="west-bengal">West Bengal</option>
                    <option value="delhi">Delhi</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="pincode" class="required">PIN Code</label>
                  <input type="text" id="pincode" name="pincode" required pattern="[0-9]{6}" autocomplete="postal-code" maxlength="6">
                </div>
              </div>
              
              <!-- DELIVERY OPTIONS -->
              <div class="delivery-options">
                <h4>Delivery Options</h4>
                <div class="delivery-option">
                  <label class="radio-label">
                    <input type="radio" name="delivery" value="standard" checked>
                    <span class="radio-mark"></span>
                    <div class="delivery-info">
                      <div class="delivery-name">Standard Delivery</div>
                      <div class="delivery-time">3-5 business days</div>
                    </div>
                    <div class="delivery-price">₹49</div>
                  </label>
                </div>
                
                <div class="delivery-option">
                  <label class="radio-label">
                    <input type="radio" name="delivery" value="express">
                    <span class="radio-mark"></span>
                    <div class="delivery-info">
                      <div class="delivery-name">Express Delivery</div>
                      <div class="delivery-time">1-2 business days</div>
                    </div>
                    <div class="delivery-price">₹149</div>
                  </label>
                </div>
              </div>
            </form>
            
            <div class="step-actions">
              <button type="button" class="btn btn--outline" onclick="app.prevCheckoutStep()">
                <i class="fas fa-arrow-left"></i>
                Back
              </button>
              <button type="button" class="btn btn--primary epic-btn" onclick="app.nextCheckoutStep()">
                Continue to Payment
                <i class="fas fa-arrow-right"></i>
              </button>
            </div>
          </section>

          <!-- STEP 3: PAYMENT -->
          <section class="checkout-step" id="step-3" style="display: none;">
            <div class="step-header">
              <h2>
                <i class="fas fa-credit-card"></i>
                Payment Method
              </h2>
              <p>Your payment is secured with 256-bit SSL encryption</p>
            </div>
            
            <div class="payment-methods">
              <!-- UPI PAYMENT -->
              <div class="payment-method">
                <label class="payment-label">
                  <input type="radio" name="payment" value="upi" checked>
                  <div class="payment-option">
                    <div class="payment-icon">
                      <i class="fas fa-mobile-alt"></i>
                    </div>
                    <div class="payment-info">
                      <div class="payment-name">UPI Payment</div>
                      <div class="payment-desc">Pay with any UPI app</div>
                    </div>
                    <div class="payment-logos">
                      <span class="upi-logo">📱</span>
                    </div>
                  </div>
                </label>
              </div>

              <!-- CARD PAYMENT -->
              <div class="payment-method">
                <label class="payment-label">
                  <input type="radio" name="payment" value="card">
                  <div class="payment-option">
                    <div class="payment-icon">
                      <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="payment-info">
                      <div class="payment-name">Credit/Debit Card</div>
                      <div class="payment-desc">Visa, MasterCard, RuPay</div>
                    </div>
                    <div class="payment-logos">
                      <span class="card-logo">💳</span>
                    </div>
                  </div>
                </label>
              </div>

              <!-- NET BANKING -->
              <div class="payment-method">
                <label class="payment-label">
                  <input type="radio" name="payment" value="netbanking">
                  <div class="payment-option">
                    <div class="payment-icon">
                      <i class="fas fa-university"></i>
                    </div>
                    <div class="payment-info">
                      <div class="payment-name">Net Banking</div>
                      <div class="payment-desc">All major banks supported</div>
                    </div>
                    <div class="payment-logos">
                      <span class="bank-logo">🏦</span>
                    </div>
                  </div>
                </label>
              </div>

              <!-- CASH ON DELIVERY -->
              <div class="payment-method">
                <label class="payment-label">
                  <input type="radio" name="payment" value="cod">
                  <div class="payment-option">
                    <div class="payment-icon">
                      <i class="fas fa-money-bill-wave"></i>
                    </div>
                    <div class="payment-info">
                      <div class="payment-name">Cash on Delivery</div>
                      <div class="payment-desc">Pay when you receive</div>
                    </div>
                    <div class="cod-fee">+₹25</div>
                  </div>
                </label>
              </div>
            </div>

            <!-- CARD DETAILS (Hidden initially) -->
            <div id="card-details" class="payment-details" style="display: none;">
              <form id="card-form" class="card-form">
                <div class="form-group">
                  <label for="cardNumber" class="required">Card Number</label>
                  <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19">
                  <div class="field-hint">
                    <i class="fas fa-lock"></i>
                    Your card details are encrypted and secure
                  </div>
                </div>
                
                <div class="form-row">
                  <div class="form-group">
                    <label for="cardExpiry" class="required">MM/YY</label>
                    <input type="text" id="cardExpiry" placeholder="MM/YY" maxlength="5">
                  </div>
                  <div class="form-group">
                    <label for="cardCVC" class="required">CVC</label>
                    <input type="text" id="cardCVC" placeholder="123" maxlength="4">
                  </div>
                </div>
                
                <div class="form-group">
                  <label for="cardName" class="required">Cardholder Name</label>
                  <input type="text" id="cardName" placeholder="Name as on card">
                </div>
              </form>
            </div>

            <!-- UPI DETAILS (Hidden initially) -->
            <div id="upi-details" class="payment-details">
              <div class="upi-info">
                <div class="upi-instruction">
                  <i class="fas fa-info-circle"></i>
                  You'll be redirected to complete payment with your UPI app
                </div>
              </div>
            </div>
            
            <div class="step-actions">
              <button type="button" class="btn btn--outline" onclick="app.prevCheckoutStep()">
                <i class="fas fa-arrow-left"></i>
                Back
              </button>
              <button type="button" class="btn btn--primary epic-btn" onclick="app.nextCheckoutStep()">
                Review Order
                <i class="fas fa-arrow-right"></i>
              </button>
            </div>
          </section>

          <!-- STEP 4: ORDER REVIEW -->
          <section class="checkout-step" id="step-4" style="display: none;">
            <div class="step-header">
              <h2>
                <i class="fas fa-clipboard-check"></i>
                Review Your Order
              </h2>
              <p>Double-check everything before placing your order</p>
            </div>
            
            <div class="order-review">
              <!-- CONTACT INFO REVIEW -->
              <div class="review-section">
                <div class="review-header">
                  <h4>
                    <i class="fas fa-envelope"></i>
                    Contact Information
                  </h4>
                  <button class="edit-btn" onclick="app.goToCheckoutStep(1)">
                    <i class="fas fa-edit"></i>
                    Edit
                  </button>
                </div>
                <div id="review-contact" class="review-content">
                  <!-- Populated by JS -->
                </div>
              </div>
              
              <!-- SHIPPING REVIEW -->
              <div class="review-section">
                <div class="review-header">
                  <h4>
                    <i class="fas fa-truck"></i>
                    Shipping Address
                  </h4>
                  <button class="edit-btn" onclick="app.goToCheckoutStep(2)">
                    <i class="fas fa-edit"></i>
                    Edit
                  </button>
                </div>
                <div id="review-shipping" class="review-content">
                  <!-- Populated by JS -->
                </div>
              </div>
              
              <!-- PAYMENT REVIEW -->
              <div class="review-section">
                <div class="review-header">
                  <h4>
                    <i class="fas fa-credit-card"></i>
                    Payment Method
                  </h4>
                  <button class="edit-btn" onclick="app.goToCheckoutStep(3)">
                    <i class="fas fa-edit"></i>
                    Edit
                  </button>
                </div>
                <div id="review-payment" class="review-content">
                  <!-- Populated by JS -->
                </div>
              </div>
            </div>
            
            <!-- ORDER NOTES -->
            <div class="order-notes">
              <label for="orderNotes">
                <i class="fas fa-sticky-note"></i>
                Order Notes (Optional)
              </label>
              <textarea id="orderNotes" placeholder="Any special instructions for your order..."></textarea>
            </div>
            
            <div class="step-actions">
              <button type="button" class="btn btn--outline" onclick="app.prevCheckoutStep()">
                <i class="fas fa-arrow-left"></i>
                Back
              </button>
              <button type="button" class="btn btn--primary place-order-btn epic-btn" onclick="app.placeOrder()">
                <i class="fas fa-shield-alt"></i>
                Place Order Securely
              </button>
            </div>
          </section>
        </div>

        <!-- RIGHT SIDE - ORDER SUMMARY -->
        <div class="checkout-sidebar">
          <div class="order-summary">
            <h3>
              <i class="fas fa-receipt"></i>
              Order Summary
            </h3>
            
            <!-- ORDER ITEMS -->
            <div id="checkout-items" class="summary-items">
              <!-- Populated by JS -->
            </div>
            
            <!-- PROMO CODE -->
            <div class="promo-section">
              <div class="promo-toggle" onclick="togglePromoCode()">
                <i class="fas fa-tag"></i>
                Have a promo code?
                <i class="fas fa-chevron-down"></i>
              </div>
              
              <div id="promo-form" class="promo-form" style="display: none;">
                <div class="promo-input-group">
                  <input type="text" id="checkout-promo-input" placeholder="Enter promo code">
                  <button type="button" id="apply-checkout-promo" class="btn btn--secondary">
                    Apply
                  </button>
                </div>
                <div id="checkout-promo-message" class="promo-message"></div>
              </div>
            </div>
            
            <!-- PRICING BREAKDOWN -->
            <div class="pricing-breakdown">
              <div class="price-row">
                <span>Subtotal:</span>
                <span id="checkout-subtotal">₹0</span>
              </div>
              
              <div class="price-row" id="checkout-promo-row" style="display: none;">
                <span id="checkout-promo-label">Discount:</span>
                <span id="checkout-discount" class="discount-amount">-₹0</span>
              </div>
              
              <div class="price-row">
                <span>Shipping:</span>
                <span id="checkout-shipping">₹49</span>
              </div>
              
              <div class="price-row total-row">
                <span>Total:</span>
                <span id="checkout-total">₹49</span>
              </div>
            </div>
            
            <!-- SECURITY BADGES -->
            <div class="security-badges">
              <div class="security-badge">
                <i class="fas fa-shield-alt"></i>
                Secure Checkout
              </div>
              <div class="security-badge">
                <i class="fas fa-undo-alt"></i>
                30-Day Returns
              </div>
              <div class="security-badge">
                <i class="fas fa-headset"></i>
                24/7 Support
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- 🎉 SUCCESS MODAL -->
  <div id="order-success-modal" class="success-modal" style="display: none;">
    <div class="success-content">
      <div class="success-animation">
        <i class="fas fa-check-circle"></i>
      </div>
      <h2>Order Placed Successfully! 🎉</h2>
      <p>Your order <strong id="success-order-id">#TRL123456</strong> has been confirmed.</p>
      <p>We'll send you an email confirmation shortly.</p>
      <button class="btn btn--primary" onclick="window.location.href='thanks.html'">
        View Order Details
      </button>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script src="script.js"></script>
  
  <style>
    /* 🔥 CHECKOUT PAGE BEAST MODE STYLES */
    .checkout-header {
      background: linear-gradient(135deg, var(--white), var(--light));
      backdrop-filter: blur(20px);
      box-shadow: var(--shadow-lg);
      padding: var(--space-16) 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 3px solid var(--primary);
    }
    
    .checkout-header .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .security-indicators {
      display: flex;
      gap: var(--space-16);
    }
    
    .security-badge {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      background: linear-gradient(135deg, var(--success), #2ecc71);
      color: var(--white);
      padding: var(--space-2) var(--space-3);
      border-radius: var(--radius-full);
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-semibold);
      box-shadow: var(--shadow-sm);
    }
    
    .back-to-cart {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      background: var(--light-gray);
      border: 2px solid var(--primary);
      padding: var(--space-3) var(--space-4);
      border-radius: var(--radius-lg);
      transition: all var(--transition);
      font-weight: var(--font-weight-semibold);
    }
    
    .back-to-cart:hover {
      background: var(--primary);
      color: var(--white);
      transform: translateY(-2px);
    }
    
    .checkout-progress {
      background: var(--white);
      padding: var(--space-8) 0;
      box-shadow: var(--shadow-sm);
    }
    
    .progress-steps {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: var(--space-16);
      position: relative;
    }
    
    .progress-steps::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 20%;
      right: 20%;
      height: 2px;
      background: var(--light-gray);
      z-index: 1;
    }
    
    .step {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--space-2);
      position: relative;
      z-index: 2;
      transition: all var(--transition);
    }
    
    .step-icon {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background: var(--light-gray);
      color: var(--gray);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      transition: all var(--transition);
      border: 3px solid transparent;
    }
    
    .step.active .step-icon {
      background: var(--primary);
      color: var(--white);
      border-color: var(--primary);
      transform: scale(1.1);
      box-shadow: var(--shadow-glow);
    }
    
    .step span {
      font-size: var(--font-size-sm);
      font-weight: var(--font-weight-semibold);
      color: var(--gray);
      transition: all var(--transition);
    }
    
    .step.active span {
      color: var(--primary);
    }
    
    .checkout-main {
      padding: var(--space-24) 0;
      background: linear-gradient(135deg, var(--light) 0%, var(--white) 100%);
      min-height: 80vh;
    }
    
    .checkout-layout {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: var(--space-20);
      align-items: start;
    }
    
    .checkout-forms {
      background: var(--white);
      border-radius: var(--radius-3xl);
      padding: var(--space-12);
      box-shadow: var(--shadow-2xl);
      border: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .checkout-step {
      animation: step-fade-in 0.6s ease-out;
    }
    
    .step-header {
      margin-bottom: var(--space-10);
      text-align: center;
    }
    
    .step-header h2 {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-3);
      font-size: var(--font-size-2xl);
      color: var(--dark);
      margin-bottom: var(--space-2);
    }
    
    .step-header p {
      color: var(--gray);
      font-size: var(--font-size-base);
    }
    
    .checkout-form {
      margin-bottom: var(--space-10);
    }
    
    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-4);
    }
    
    .form-group {
      margin-bottom: var(--space-6);
    }
    
    .form-group label {
      display: block;
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--space-2);
      color: var(--dark);
      font-size: var(--font-size-sm);
    }
    
    .form-group label.required::after {
      content: ' *';
      color: var(--error);
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: var(--space-4) var(--space-4);
      border: 2px solid var(--light-gray);
      border-radius: var(--radius-lg);
      font-size: var(--font-size-base);
      transition: all var(--transition);
      background: var(--white);
    }
    
    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.2);
      outline: none;
    }
    
    .field-hint {
      font-size: var(--font-size-sm);
      color: var(--gray);
      margin-top: var(--space-1);
      display: flex;
      align-items: center;
      gap: var(--space-1);
    }
    
    .checkbox-label {
      display: flex;
      align-items: center;
      gap: var(--space-3);
      cursor: pointer;
      font-size: var(--font-size-sm);
    }
    
    .checkbox-label input[type="checkbox"] {
      width: auto;
      margin: 0;
    }
    
    .delivery-options {
      margin-top: var(--space-8);
    }
    
    .delivery-options h4 {
      margin-bottom: var(--space-4);
      color: var(--dark);
      font-weight: var(--font-weight-semibold);
    }
    
    .delivery-option {
      border: 2px solid var(--light-gray);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-3);
      transition: all var(--transition);
    }
    
    .delivery-option:has(input:checked) {
      border-color: var(--primary);
      background: rgba(0, 102, 204, 0.05);
    }
    
    .radio-label {
      display: flex;
      align-items: center;
      gap: var(--space-4);
      padding: var(--space-4);
      cursor: pointer;
    }
    
    .radio-label input[type="radio"] {
      width: auto;
      margin: 0;
    }
    
    .delivery-info {
      flex: 1;
    }
    
    .delivery-name {
      font-weight: var(--font-weight-semibold);
      color: var(--dark);
    }
    
    .delivery-time {
      font-size: var(--font-size-sm);
      color: var(--gray);
    }
    
    .delivery-price {
      font-weight: var(--font-weight-bold);
      color: var(--primary);
    }
    
    .payment-methods {
      margin-bottom: var(--space-8);
    }
    
    .payment-method {
      border: 2px solid var(--light-gray);
      border-radius: var(--radius-lg);
      margin-bottom: var(--space-3);
      transition: all var(--transition);
      overflow: hidden;
    }
    
    .payment-method:has(input:checked) {
      border-color: var(--primary);
      background: rgba(0, 102, 204, 0.05);
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }
    
    .payment-label {
      display: block;
      cursor: pointer;
    }
    
    .payment-option {
      display: flex;
      align-items: center;
      gap: var(--space-4);
      padding: var(--space-5);
    }
    
    .payment-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--light), var(--light-gray));
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: var(--primary);
    }
    
    .payment-info {
      flex: 1;
    }
    
    .payment-name {
      font-weight: var(--font-weight-bold);
      color: var(--dark);
      margin-bottom: var(--space-1);
    }
    
    .payment-desc {
      font-size: var(--font-size-sm);
      color: var(--gray);
    }
    
    .payment-logos {
      display: flex;
      gap: var(--space-2);
      font-size: 1.5rem;
    }
    
    .cod-fee {
      background: var(--warning);
      color: var(--white);
      padding: var(--space-1) var(--space-2);
      border-radius: var(--radius-sm);
      font-size: var(--font-size-xs);
      font-weight: var(--font-weight-bold);
    }
    
    .payment-details {
      background: var(--light);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      margin-top: var(--space-4);
      border: 2px solid var(--primary);
    }
    
    .upi-info {
      text-align: center;
      padding: var(--space-8);
    }
    
    .upi-instruction {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-3);
      font-size: var(--font-size-base);
      color: var(--primary);
      font-weight: var(--font-weight-semibold);
    }
    
    .order-review {
      margin-bottom: var(--space-8);
    }
    
    .review-section {
      background: var(--light);
      border-radius: var(--radius-lg);
      padding: var(--space-6);
      margin-bottom: var(--space-4);
      border: 1px solid var(--light-gray);
    }
    
    .review-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-4);
    }
    
    .review-header h4 {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      color: var(--dark);
      font-weight: var(--font-weight-semibold);
    }
    
    .edit-btn {
      background: none;
      border: 2px solid var(--primary);
      color: var(--primary);
      padding: var(--space-2) var(--space-3);
      border-radius: var(--radius-lg);
      font-size: var(--font-size-sm);
      cursor: pointer;
      transition: all var(--transition);
      display: flex;
      align-items: center;
      gap: var(--space-1);
    }
    
    .edit-btn:hover {
      background: var(--primary);
      color: var(--white);
    }
    
    .review-content {
      color: var(--gray);
      line-height: 1.6;
    }
    
    .order-notes {
      margin-bottom: var(--space-8);
    }
    
    .order-notes label {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      font-weight: var(--font-weight-semibold);
      margin-bottom: var(--space-3);
      color: var(--dark);
    }
    
    .order-notes textarea {
      width: 100%;
      min-height: 80px;
      padding: var(--space-4);
      border: 2px solid var(--light-gray);
      border-radius: var(--radius-lg);
      font-family: inherit;
      resize: vertical;
    }
    
    .step-actions {
      display: flex;
      gap: var(--space-4);
      justify-content: space-between;
      align-items: center;
      padding-top: var(--space-8);
      border-top: 2px solid var(--light-gray);
    }
    
    .step-actions .btn {
      min-width: 160px;
    }
    
    .checkout-sidebar {
      position: sticky;
      top: 120px;
    }
    
    .order-summary {
      background: var(--white);
      border-radius: var(--radius-3xl);
      padding: var(--space-8);
      box-shadow: var(--shadow-2xl);
      border: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .order-summary h3 {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      margin-bottom: var(--space-6);
      color: var(--dark);
      font-weight: var(--font-weight-bold);
    }
    
    .summary-items {
      margin-bottom: var(--space-6);
      max-height: 300px;
      overflow-y: auto;
      padding-right: var(--space-2);
    }
    
    .summary-item {
      display: flex;
      gap: var(--space-3);
      margin-bottom: var(--space-4);
      padding-bottom: var(--space-4);
      border-bottom: 1px solid var(--light-gray);
    }
    
    .summary-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }
    
    .item-image {
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, var(--light), var(--light-gray));
      border-radius: var(--radius-lg);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
    }
    
    .item-details {
      flex: 1;
    }
    
    .item-name {
      font-weight: var(--font-weight-semibold);
      color: var(--dark);
      margin-bottom: var(--space-1);
      font-size: var(--font-size-sm);
    }
    
    .item-quantity {
      font-size: var(--font-size-xs);
      color: var(--gray);
    }
    
    .item-price {
      font-weight: var(--font-weight-bold);
      color: var(--primary);
      font-size: var(--font-size-sm);
    }
    
    .promo-section {
      margin-bottom: var(--space-6);
    }
    
    .promo-toggle {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--space-3);
      background: var(--light);
      border-radius: var(--radius-lg);
      cursor: pointer;
      transition: all var(--transition);
      font-weight: var(--font-weight-semibold);
      color: var(--primary);
    }
    
    .promo-toggle:hover {
      background: rgba(0, 102, 204, 0.1);
    }
    
    .promo-form {
      margin-top: var(--space-3);
      padding: var(--space-4);
      background: var(--light);
      border-radius: var(--radius-lg);
    }
    
    .promo-input-group {
      display: flex;
      gap: var(--space-2);
      margin-bottom: var(--space-2);
    }
    
    .promo-input-group input {
      flex: 1;
      padding: var(--space-2) var(--space-3);
      border: 2px solid var(--light-gray);
      border-radius: var(--radius-lg);
    }
    
    .promo-message {
      font-size: var(--font-size-sm);
    }
    
    .promo-message .success { color: var(--success); }
    .promo-message .error { color: var(--error); }
    
    .pricing-breakdown {
      margin-bottom: var(--space-6);
    }
    
    .price-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-3) 0;
      border-bottom: 1px solid var(--light-gray);
    }
    
    .price-row:last-child {
      border-bottom: none;
    }
    
    .total-row {
      font-weight: var(--font-weight-bold);
      font-size: var(--font-size-lg);
      color: var(--primary);
      padding-top: var(--space-4);
      margin-top: var(--space-2);
      border-top: 2px solid var(--primary);
    }
    
    .discount-amount {
      color: var(--success) !important;
      font-weight: var(--font-weight-bold);
    }
    
    .security-badges {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-2);
    }
    
    .security-badges .security-badge {
      background: linear-gradient(135deg, var(--light), var(--light-gray));
      color: var(--primary);
      border: 1px solid rgba(0, 102, 204, 0.2);
      font-size: var(--font-size-xs);
      justify-content: center;
    }
    
    .success-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }
    
    .success-content {
      background: var(--white);
      border-radius: var(--radius-3xl);
      padding: var(--space-12);
      text-align: center;
      max-width: 400px;
      margin: var(--space-6);
      box-shadow: var(--shadow-epic);
    }
    
    .success-animation {
      font-size: 4rem;
      color: var(--success);
      margin-bottom: var(--space-6);
      animation: success-bounce 0.6s ease;
    }
    
    .success-content h2 {
      color: var(--dark);
      margin-bottom: var(--space-4);
    }
    
    .success-content p {
      color: var(--gray);
      margin-bottom: var(--space-6);
    }
    
    @keyframes step-fade-in {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    @keyframes success-bounce {
      0%, 20%, 60%, 100% { transform: translateY(0); }
      40% { transform: translateY(-20px); }
      80% { transform: translateY(-10px); }
    }
    
    /* 📱 RESPONSIVE */
    @media (max-width: 1024px) {
      .checkout-layout {
        grid-template-columns: 1fr;
        gap: var(--space-12);
      }
      
      .checkout-sidebar {
        position: static;
        order: -1;
      }
      
      .security-indicators {
        display: none;
      }
    }
    
    @media (max-width: 768px) {
      .progress-steps {
        gap: var(--space-8);
      }
      
      .step span {
        display: none;
      }
      
      .form-row {
        grid-template-columns: 1fr;
      }
      
      .step-actions {
        flex-direction: column;
      }
      
      .step-actions .btn {
        width: 100%;
      }
      
      .checkout-forms {
        padding: var(--space-6);
      }
      
      .order-summary {
        padding: var(--space-6);
      }
    }
    
    @media (max-width: 480px) {
      .checkout-header .header-content {
        flex-direction: column;
        gap: var(--space-4);
        text-align: center;
      }
      
      .back-to-cart {
        order: -1;
      }
      
      .progress-steps::before {
        display: none;
      }
      
      .progress-steps {
        gap: var(--space-4);
      }
      
      .step-icon {
        width: 36px;
        height: 36px;
        font-size: 1rem;
      }
    }
  </style>

  <script>
    // Toggle promo code form
    function togglePromoCode() {
      const form = document.getElementById('promo-form');
      const isVisible = form.style.display === 'block';
      form.style.display = isVisible ? 'none' : 'block';
    }

    // Payment method change handler
    document.addEventListener('DOMContentLoaded', function() {
      const paymentRadios = document.querySelectorAll('input[name="payment"]');
      
      paymentRadios.forEach(radio => {
        radio.addEventListener('change', function() {
          // Hide all payment details
          document.querySelectorAll('.payment-details').forEach(detail => {
            detail.style.display = 'none';
          });
          
          // Show selected payment details
          if (this.value === 'card') {
            document.getElementById('card-details').style.display = 'block';
          } else if (this.value === 'upi') {
            document.getElementById('upi-details').style.display = 'block';
          }
        });
      });

      // Initialize first payment method
      const checkedRadio = document.querySelector('input[name="payment"]:checked');
      if (checkedRadio && checkedRadio.value === 'upi') {
        document.getElementById('upi-details').style.display = 'block';
      }
    });
  </script>
</body>
</html>
